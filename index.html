<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <title>Home - Documentation</title>
    
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
    <script src="scripts/nav.js" defer></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav >
    
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Action.html">Action</a><ul class='methods'></ul></li><li><a href="ActionUtil.html">ActionUtil</a><ul class='methods'></ul></li><li><a href="Alert.html">Alert</a><ul class='methods'></ul></li><li><a href="Click.html">Click</a><ul class='methods'></ul></li><li><a href="Condition.html">Condition</a><ul class='methods'></ul></li><li><a href="ElementUtil.html">ElementUtil</a><ul class='methods'></ul></li><li><a href="Expectation.html">Expectation</a><ul class='methods'></ul></li><li><a href="JQueryAction.html">JQueryAction</a><ul class='methods'></ul></li><li><a href="ReactAction.html">ReactAction</a><ul class='methods'></ul></li><li><a href="WaitCondition.html">WaitCondition</a><ul class='methods'></ul></li><li><a href="Window.html">Window</a></li><li><a href="XPath.html">XPath</a><ul class='methods'></ul></li></ul>
</nav>

<div id="main">
    

    



    


    <section class="package">
        <h3> </h3>		
    </section>









    



    <section class="readme usertext">
        <article><h1>Protractor Base DSL</h1>
<p>This library helps with providing the base DSL classes to lessen the burden of creating protractor scenarios.
DSL prevents the most known issues occurred in Protractor and handles it in a cross-browser way.
It can handle latest Chrome, Firefox and Internet 11 browsers.</p>
<h2>Complete API Documentation</h2>
<p>Check here <a href="https://acierto.github.io/protractor-base-dsl/">Base DSL API</a></p>
<h2>Global variables</h2>
<table>
<thead>
<tr>
<th>name</th>
<th>default value</th>
<th>description</th>
</tr>
</thead>
<tbody>
<tr>
<td>defaultExpectationTimeout</td>
<td>10000</td>
<td>Timeout to wait (in ms) a condition</td>
</tr>
<tr>
<td>defaultBrowserWidth</td>
<td>1024</td>
<td>Default width of browser to set before running Protractor tests</td>
</tr>
<tr>
<td>defaultBrowserHeight</td>
<td>768</td>
<td>Default height of browser to set before running Protractor tests</td>
</tr>
</tbody>
</table>
<h2>Overview of several DSL functions</h2>
<h3>ActionUtil.repeatAction</h3>
<p>One of the most significant problems existing in Protractor is flakiness when certain action considered to be executed
but in reality it is just skipped by certain reasons. For example you click on a button and expect some action and
1 out of 10/20 times test fails due to this. To overcome such issue you can use <code>ActionUtil.repeatAction</code>. Example
of usage:</p>
<pre class="prettyprint source lang-javascript"><code>import {Action, ActionUtil, WaitCondition} from 'protractor-base-dsl';
const action = () => Action.click('button');
const condition = () => WaitCondition.present('.modal-dialog');
ActionUtil.repeatAction(action, condition);
</code></pre>
<p>At this case <code>action</code> method will be 3 times and calls each time expected <code>condition</code>. It is essential to use at this
case <code>WaitCondition</code>, not <code>Expectation</code> or <code>Condition</code> DSL.</p>
<h3>Action.jsClick</h3>
<p>At some situations it happens that click just not propagated by protractor to an element. Without some logical reason.
When you stuck with such a case, I suggest to use the approach with <code>Action.jsClick</code>. It uses execution of pure javascript
in the browser to click on the element.</p>
<pre class="prettyprint source lang-javascript"><code>Action.jsClick(`.click-me-button`);
</code></pre>
<h3>Action.typeText</h3>
<p>If you don't use this method but rather default typing of Protractor. You'll be very disappointed, especially if you
test Internet Explorer or Firefox. The problem of in missed letters. It can also happening on Chrome, much less
often. When you start using <a href="https://www.npmjs.com/package/debounce">debounce</a> the problem will be also obvious.
Usage of this DSL is pretty simple</p>
<pre class="prettyprint source lang-javascript"><code>Action.typeText('input', 'text to type')
Action.typeText('input', 'text to type', 300) // if you wish to type slower, by default it is 100 ms.
</code></pre>
<h3>Working with iFrame?</h3>
<p>Consider to use next DSL to make elements searchable inside of iFrame.</p>
<pre class="prettyprint source lang-javascript"><code>Action.switchToFrame('#specific-iframe-id')
</code></pre>
<p>After executing this DSL, the scope visibility becomes only this iframe with elements inside it. If you won't do it,
protractor just won't see any of it. Same applies for elements outside of iframe. Now they are not accessible either.
To come back to a scope of the main application, use this DSL method:</p>
<pre class="prettyprint source lang-javascript"><code>Action.switchToDefaultContent()
</code></pre>
<h2>How to configure the project to use this package</h2>
<p>Most of the functionality works without any extra configuration. What you have to do is only use this package
as dependency.</p>
<p>Example:</p>
<pre class="prettyprint source lang-javascript"><code>import {Expectation, XPath} from 'protractor-base-dsl';

const buttonSelector = (buttonLabel) => XPath.withLinkContains('.dsfaApp .nav', buttonLabel);
const adminButtonVisible = () => Expectation.displayed(buttonSelector('Admin'));
</code></pre>
<h3>Usage of ReactAction DSL</h3>
<p>This package can be used by React project and therefore for that some of functionality is implemented based on the react
packages. For that React specific actions are collected in <code>ReactAction</code> DSL. Using action emulation
with a help of jQuery or embedded Protractor methods won't work. For that is required to use <code>ReactTestUtils</code>.
What do you need to do in your project for that?
In your webpack configuration you have to expose that variable, by adding a loader</p>
<pre class="prettyprint source lang-javascript"><code>    {
        test: require.resolve('react-dom/test-utils'),
        use: [{
            loader: 'expose-loader',
            options: 'ReactTestUtils'
        }]
    }
</code></pre>
<h3>Usage of doubleClick and hover from Action DSL</h3>
<p>As a standard protractor library doesn't provide with such functionality there is <code>bean</code> npm package was used to
achieve it. To make it work, in your project you have to add in webpack configuration extra loader which expose
bean:</p>
<pre class="prettyprint source lang-javascript"><code>{
    test: require.resolve('bean'),
    use: [{
        loader: 'expose-loader',
        options: 'bean'
    }]
}
</code></pre>
<h3>Usage of JQueryAction DSL</h3>
<p>If in some case it will be required for you to execute jQuery actions, you can use it as well. To make it work,
in your project you have to add in webpack configuration extra loader which expose several definitions of jQuery
global object:</p>
<pre class="prettyprint source lang-javascript"><code>{
    test: require.resolve('jquery'),
    use: [{
        loader: 'expose-loader',
        options: 'jQuery'
    }, {
        loader: 'expose-loader',
        options: 'jquery'
    }, {
        loader: 'expose-loader',
        options: '$'
    }]
}
</code></pre>
<h3>Usage of XPath DSL</h3>
<p>This kind of DSL is useful for example when you have multiple element result on specific CSS selector.
And only the different in text inside of element.
For example: <code>&lt;button&gt;Save&lt;/button&gt;</code> and <code>&lt;button&gt;Close&lt;/button&gt;</code>. If code is yours and you are ok
to add extra css class name, then you won't need this DSL. For the rest, it will look like then:</p>
<pre class="prettyprint source lang-javascript"><code>import {XPath} from 'protractor-base-dsl';
const controlPanel = `#pane-with-reports .report .btn-panel`;
const hideFiltersButton = XPath.withButtonContains(controlPanel, 'Hide filters');
const showFiltersButton = XPath.withButtonContains(controlPanel, 'Show filters');
</code></pre>
<h2>For maintainers</h2>
<p>The build/release process is using <a href="https://gulpjs.com/">Gulp</a>. It helps pretty well with creating flows, which
easy to develop and maintain.</p>
<p>You have to install Gulp 4 globally as npm package:</p>
<p><code>yarn add global gulp</code> or <code>npm i -g gulp</code></p>
<p>Verification that you have proper version:
<code>gulp -v</code> should resulted into</p>
<pre class="prettyprint source lang-text"><code>CLI version: 2.2.0
Local version: 4.0.2
</code></pre>
<p>There are next gulp tasks can be executed:</p>
<table>
<thead>
<tr>
<th>Gulp task name</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>build-dist</td>
<td>Executes next gulp tasks: <code>clean</code>, <code>lint</code>, <code>webpack-build</code></td>
</tr>
<tr>
<td>clean</td>
<td>Cleans a <code>dist</code> directory.</td>
</tr>
<tr>
<td>doc</td>
<td>Generates API documentation for all provided DSL by parsing js docs</td>
</tr>
<tr>
<td>gh-pages</td>
<td>Executes next gulp tasks: <code>doc</code>, <code>publish</code></td>
</tr>
<tr>
<td>lint</td>
<td>Verifies app folder that scripts follow <code>.eslintrc</code> rules.</td>
</tr>
<tr>
<td>publish</td>
<td>Publishes <code>dist</code> folder to gh-pages branch. What makes API documentation available here <a href="https://acierto.github.io/protractor-base-dsl/">protractor-base-dsl</a></td>
</tr>
<tr>
<td>webpack-build</td>
<td>Generates a bundle with help of <a href="https://webpack.js.org/">Webpack</a> into <code>dist</code> folder.</td>
</tr>
<tr>
<td>watch-lint</td>
<td>Runs the lint watcher for all js changes in <code>app</code> folder</td>
</tr>
<tr>
<td>complete-release</td>
<td>Rebuilds the bundle, regenerates documentation and publishes it to gh-pages. Bumps up the version in package.json and uploads the new version to NPM. <em>Note</em>: For this task you have to be logged in NPM</td>
</tr>
</tbody>
</table>
<h3>To build a new version:</h3>
<p><code>gulp build-dist</code></p>
<h3>To release a new version:</h3>
<p><code>gulp complete-release</code></p></article>
    </section>






    
    
</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.4</a> on Wed May 20 2020 09:02:13 GMT+0200 (Central European Summer Time) using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/polyfill.js"></script>
<script src="scripts/linenumber.js"></script>



</body>
</html>